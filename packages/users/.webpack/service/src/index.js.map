{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/client.js","webpack:///./src/index.js","webpack:///./src/routes/login.js","webpack:///./src/routes/reset.js","webpack:///./src/schemas/login.js","webpack:///./src/schemas/validate.js","webpack:///external \"@tomfischer/middleware\"","webpack:///external \"aws-sdk\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"express-async-handler\"","webpack:///external \"http-status-codes\"","webpack:///external \"joi\"","webpack:///external \"serverless-http\"","webpack:///external \"source-map-support/register\""],"names":["getUserPool","AWS","CognitoIdentityServiceProvider","region","process","env","COGNITO_USER_POOL_REGION","initiateAuthResponseHandler","result","ChallengeName","session","Session","idToken","AuthenticationResult","IdToken","initiateAuth","email","password","adminInitiateAuth","AuthFlow","UserPoolId","COGNITO_USER_POOL_ID","ClientId","COGNITO_USER_POOL_CLIENT_ID","AuthParameters","USERNAME","PASSWORD","promise","resetTemporaryPassword","adminRespondToAuthChallenge","ChallengeResponses","NEW_PASSWORD","app","express","use","bodyParser","urlencoded","extended","json","cookieParser","cors","login","reset","middleware","errorHandler","handler","serverless","router","Router","mergeParams","req","res","locals","body","client","status","HttpStatus","OK","post","validate","schemas","types","BODY","asyncHandler","loginSchema","Joi","object","keys","string","required","resetTemporaryPasswordSchema","PARAMS","QUERY","schema","type","next","err","statusCode","BAD_REQUEST","message"],"mappings":"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","file":"src/index.js","sourceRoot":""}