{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/client.js","webpack:///./src/index.js","webpack:///./src/routes/create.js","webpack:///./src/routes/login.js","webpack:///./src/routes/reset.js","webpack:///./src/schemas/login.js","webpack:///./src/schemas/validate.js","webpack:///external \"@tomfischer/middleware\"","webpack:///external \"aws-sdk\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"cors\"","webpack:///external \"express\"","webpack:///external \"express-async-handler\"","webpack:///external \"http-status-codes\"","webpack:///external \"joi\"","webpack:///external \"serverless-http\"","webpack:///external \"source-map-support/register\""],"names":["getUserPool","AWS","CognitoIdentityServiceProvider","region","process","env","COGNITO_USER_POOL_REGION","initiateAuthResponseHandler","result","ChallengeName","idToken","AuthenticationResult","IdToken","name","firstName","family_name","lastName","email","JSON","parse","ChallengeParameters","userAttributes","session","Session","challengeName","user","initiateAuth","password","response","adminInitiateAuth","AuthFlow","UserPoolId","COGNITO_USER_POOL_ID","ClientId","COGNITO_USER_POOL_CLIENT_ID","AuthParameters","USERNAME","PASSWORD","promise","getUser","resetTemporaryPassword","adminRespondToAuthChallenge","ChallengeResponses","NEW_PASSWORD","username","adminGetUser","Username","mapping","UserAttributes","reduce","Name","Value","createUser","adminCreateUser","TemporaryPassword","app","express","use","bodyParser","urlencoded","extended","json","cookieParser","cors","login","reset","create","middleware","errorHandler","handler","serverless","router","Router","mergeParams","req","res","body","client","status","HttpStatus","OK","post","asyncHandler","locals","validate","schemas","types","BODY","loginSchema","Joi","object","keys","string","required","resetTemporaryPasswordSchema","allow","PARAMS","QUERY","schema","type","next","err","statusCode","BAD_REQUEST","message"],"mappings":"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","file":"src/index.js","sourceRoot":""}